#!/bin/sh

# Check for dependency issues
echo "ğŸ” Checking dependencies..."
pnpm check-deps
if [ $? -ne 0 ]; then
  echo "âŒ Dependency check failed. Please fix the issues before committing."
  echo "   You can run 'pnpm fix-deps' to automatically fix some issues."
  exit 1
fi
echo "âœ… Dependencies check passed!"

# Run linting
echo "ğŸ” Running linting..."
pnpm lint
if [ $? -ne 0 ]; then
  echo "âŒ Linting failed. Please fix the issues before committing."
  exit 1
fi
echo "âœ… Linting passed!"

# Run formatting
echo "ğŸ” Checking formatting..."
# Use format:check to run Prettier on staged files only
pnpm format:check
if [ $? -ne 0 ]; then
  echo "âŒ Formatting check failed. Please fix the issues before committing."
  exit 1
fi
echo "âœ… Formatting check passed!"

echo "ğŸ‰ All checks passed! Proceeding with commit..."
